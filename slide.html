<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Websocket Example</title>
</head>
<body>
    <div id="slide">
    </div>
</body>
    <script>
        const socket = new WebSocket('ws://localhost:3000');
        const presid = window.location.search.split('?')[1];
        console.log(presid)
        socket.onmessage = async (event) => {
            console.log(`Recieved: ${event.data}`);
            if(Number(event.data) != NaN){
                //get type
                var response = await fetch(`/slideinfo/${presid}/${event.data}`)
                var json = await response.json();
                var type = json.type;
                var next = json.nextSlide;
                console.log(type)
                const slide = document.getElementById('slide');
                // slide.src = `/slide/1/${event.data}`
                if(type == "video"){
                    slide.innerHTML = ` <video controls autoplay="">
                                          <source src="/slide/${presid}/${event.data}" type="video/mp4">
                                        Your br3000owser does not support the video tag.
                                        </video> `
                } else {
                    slide.innerHTML = `<${type} src="/slide/${presid}/${event.data}" alt="Error :c" id="display">`
                }
            }
        }
    </script>
</html>
